
---
title: "autotest"
output:
  rmarkdown::html_vignette:
    self_contained: no

  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = TRUE,
  message = TRUE,
  width = 120,
  comment = "#>",
  fig.retina = 2,
  fig.path = "README-"
)
```

<!-- badges: start -->

[![R build
status](https://github.com/mpadge/autotest/workflows/R-CMD-check/badge.svg)](https://github.com/mpadge/autotest/actions?query=workflow%3AR-CMD-check)
[![codecov](https://codecov.io/gh/mpadge/autotest/branch/master/graph/badge.svg)](https://codecov.io/gh/mpadge/autotest)
[![Project Status:
Concept](https://www.repostatus.org/badges/latest/concept.svg)](https://www.repostatus.org/#concept)
<!-- badges: end -->

# autotest

Automatic stress testing of R packages via a simple YAML schema specifying one
or more example workflows for each function of a package. The simplest
workflows involve nominating data sets which may be submitted to a function,
while more complicated workflows may involve multiple data sets, intermediate
pre-processing stages, and other transformations prior to submission to
a nominated function.

The following illustrates a typical `yaml` schema, where items in
angle-brackets ("<", ">") must be completed. Note that the `libraries` field
identifies any libraries beyond those required by the package itself (via
"Depends", "Imports", or "Suggests"). These typically included packages holding
data to be used in the `autotest` workflow.

```
package: <package_name>
libraries:
    - <required library 1>
    - <required library 2>
functions:
    - <name of first function>:
        - data:
            - name: <name of a data set, in pkg::name format when from another package>
            - preprocess:
                - "<R code required for pre-processing exlosed in quotation marks>"
                - "<second line of pre-processing code>"
                - "<more code>"
        - data:
            - name: <name of another data set which may be sumibted to funciton>
            - preprocess:
                - "<more lines of pre-processing code>"
    - <name of secon function>::
        - data: <single data set>
        - preprocess: "<single line of pre-processing code>"
```

This `yaml` code should be in the `test` directory of a package -- not in the
`test/testthat` directory. The above template can be generated via the function
`at_template()`.
